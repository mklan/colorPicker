!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _colorPicker=__webpack_require__(2),_colorPicker2=_interopRequireDefault(_colorPicker);window.ColorPicker=_colorPicker2["default"]},function(module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||0>n||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;throw TypeError('Uncaught, unspecified "error" event.')}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1),handler.apply(this,args)}else if(isObject(handler))for(args=Array.prototype.slice.call(arguments,1),listeners=handler.slice(),len=listeners.length,i=0;len>i;i++)listeners[i].apply(this,args);return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned&&(m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),"function"==typeof console.trace&&console.trace())),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-- >0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(0>position)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else if(listeners)for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;if(evlistener)return evlistener.length}return 0},EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_events=__webpack_require__(1),_mediaCropper=__webpack_require__(3),_mediaCropper2=_interopRequireDefault(_mediaCropper),ColorPicker=function(_EventEmitter){function ColorPicker(src,_ref){var _ref$zoomElement=_ref.zoomElement,zoomElement=void 0===_ref$zoomElement?!1:_ref$zoomElement,_ref$zoomWindowSize=_ref.zoomWindowSize,zoomWindowSize=void 0===_ref$zoomWindowSize?100:_ref$zoomWindowSize,_ref$zoom=_ref.zoom,zoom=void 0===_ref$zoom?4:_ref$zoom,_ref$clickListener=_ref.clickListener,clickListener=void 0===_ref$clickListener?!1:_ref$clickListener;_classCallCheck(this,ColorPicker);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(ColorPicker).call(this));if(_this.src=src,zoomElement){1>zoom&&(zoom=1),_this.mediaCropper=new _mediaCropper2["default"];var contentWrapper=document.createElement("div");contentWrapper.id="contentWrapper",contentWrapper.appendChild(_this.src),document.body.appendChild(contentWrapper),_this.zoomElement=document.createElement("div"),_this.zoomElement.id="zoom",_this.zoomElement.style.visibility="hidden",_this.zoomElement.style.position="absolute",_this.zoomElement.style.border="10px solid",_this.zoomElement.style.width=zoomWindowSize+"px",_this.zoomElement.style.height=zoomWindowSize+"px",_this.zoomElement.style.borderRadius="50%";var crossHair=document.createElement("div");crossHair.style.width=zoom+"px",crossHair.style.height=zoom+"px",crossHair.style.position="absolute",crossHair.style.left=zoomWindowSize/2-zoom/2+"px",crossHair.style.top=zoomWindowSize/2-zoom/2+"px",crossHair.style.border="1px solid",crossHair.style.borderColor="red",_this.zoomElement.appendChild(crossHair),contentWrapper.appendChild(_this.zoomElement),_this.src.addEventListener("mouseleave",function(e){_this.zoomElement.style.visibility="hidden"}),_this.src.addEventListener("mousemove",function(e){var x=void 0===e.offsetX?e.layerX:e.offsetX,y=void 0===e.offsetY?e.layerY:e.offsetY,offset=zoomWindowSize/2/zoom,result=_this.mediaCropper.cropMedia(_this.src,{stretch:zoom,left:x-offset,top:y-offset,width:zoomWindowSize,height:zoomWindowSize});_this.zoomElement.style.left=x+zoomWindowSize/2+"px",_this.zoomElement.style.top=y-zoomWindowSize/2+"px",_this.zoomElement.style.visibility="visible",_this.zoomElement.style.backgroundImage='url("'+result.croppedCanvas.toDataURL()+'")';var rgb=_this.getColor(x,y);_this.zoomElement.style.borderColor="rgb("+rgb[0]+","+rgb[1]+","+rgb[2]+")"})}return clickListener&&_this.src.addEventListener("click",function(e){var x=void 0===e.offsetX?e.layerX:e.offsetX,y=void 0===e.offsetY?e.layerY:e.offsetY,rgb=_this.getColor(x,y);_this.emit("colorPicked",{rgb:rgb})}),_this}return _inherits(ColorPicker,_EventEmitter),_createClass(ColorPicker,[{key:"getColor",value:function(x,y){var canvas=document.createElement("canvas"),context=canvas.getContext("2d");return canvas.width=this.src.clientWidth,canvas.height=this.src.clientHeight,context.drawImage(this.src,0,0,canvas.width,canvas.height),context.getImageData(x,y,1,1).data}}]),ColorPicker}(_events.EventEmitter);exports["default"]=ColorPicker},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_events=__webpack_require__(1),MediaCropper=function(_EventEmitter){function MediaCropper(media){_classCallCheck(this,MediaCropper);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(MediaCropper).call(this));if(!media)return _possibleConstructorReturn(_this);var x1=0,y1=0,x2=0,y2=0,dragThreshold=50,mousedown=!1,dragging=!1,selectionRect=document.createElement("div");selectionRect.id="selectionRect",selectionRect.style.border="1px dotted #000",selectionRect.style.position="fixed",selectionRect.style.backgroundColor="red",selectionRect.style.opacity=.5,selectionRect.hidden=1,document.body.appendChild(selectionRect);var reCalc=function(){var x3=Math.min(x1,x2),x4=Math.max(x1,x2),y3=Math.min(y1,y2),y4=Math.max(y1,y2);selectionRect.style.left=x3+"px",selectionRect.style.top=y3+"px",selectionRect.style.width=x4-x3+"px",selectionRect.style.height=y4-y3+"px"};return media.onmousedown=function(e){mousedown=!0,selectionRect.hidden=0,x1=e.clientX,y1=e.clientY},onmousemove=function(e){if(mousedown){x2=e.clientX,y2=e.clientY;var deltaX=Math.abs(x2-x1),deltaY=Math.abs(x2-x1);reCalc(),(deltaX>dragThreshold||deltaY>dragThreshold)&&(dragging=!0)}},onmouseup=function(e){var offsetTop=media.offsetTop,offsetLeft=media.offsetLeft,scrollTop=document.body.scrollTop||document.documentElement.scrollTop,scrollLeft=document.body.scrollLeft||document.documentElement.scrollLeft;scrollTop-=offsetTop,scrollLeft-=offsetLeft,selectionRect.hidden=1,mousedown=!1,dragging&&(dragging=!1,_this.cropMedia(media,{left:parseInt(selectionRect.style.left,10)+scrollLeft,top:parseInt(selectionRect.style.top,10)+scrollTop,width:parseInt(selectionRect.style.width,10),height:parseInt(selectionRect.style.height,10)}))},_this}return _inherits(MediaCropper,_EventEmitter),_createClass(MediaCropper,[{key:"cropMedia",value:function(media){var _ref=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],_ref$stretch=_ref.stretch,stretch=void 0===_ref$stretch?1:_ref$stretch,_ref$left=_ref.left,left=void 0===_ref$left?0:_ref$left,_ref$top=_ref.top,top=void 0===_ref$top?0:_ref$top,_ref$width=_ref.width,width=void 0===_ref$width?10:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?10:_ref$height,result={},croppedCanvas=document.createElement("canvas");return croppedCanvas.width=width,croppedCanvas.height=height,croppedCanvas.getContext("2d").drawImage(media,left,top,width,height,0,0,width*stretch,height*stretch),result.croppedCanvas=croppedCanvas,result.dimensions={left:left,top:top,width:width,height:height},media.currentTime&&(result.currentTime=media.currentTime),this.emit("cropped",result),result}}]),MediaCropper}(_events.EventEmitter);exports["default"]=MediaCropper}]);